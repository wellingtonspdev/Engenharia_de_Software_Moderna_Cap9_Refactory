<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preparo para Apresenta√ß√£o: Refactoring</title>
    <style>
        /* Estilos Gerais */
        :root {
            --font-main: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --color-primary: #005f73;
            --color-secondary: #0a9396;
            --color-text: #2c3e50;
            --color-background: #f4f7f9;
            --color-card: #ffffff;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--color-background);
            color: var(--color-text);
            margin: 0; padding: 0;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden;
        }

        #presentation-container {
            width: 95%; max-width: 1200px; height: 95vh;
            background-color: var(--color-card);
            border-radius: 16px;
            box-shadow: 0 12px 35px rgba(44, 62, 80, 0.15);
            display: flex; flex-direction: column;
            overflow: hidden; position: relative;
        }

        #slide-viewport {
            flex-grow: 1;
            position: relative;
        }
        
        .slide {
            box-sizing: border-box; padding: 40px 65px;
            width: 100%; height: 100%; position: absolute;
            opacity: 0; visibility: hidden;
            transition: opacity 0.6s ease-in-out;
            transform: translateY(20px);
            overflow-y: auto;
        }
        
        .slide.active { opacity: 1; visibility: visible; transform: translateY(0); }

        /* Estilos de Conte√∫do (Vis√£o do P√∫blico) */
        .audience-view h1, .audience-view h2, .audience-view h3 {
            color: var(--color-primary);
            border-bottom: 3px solid var(--color-secondary);
            padding-bottom: 12px; font-weight: 700;
        }
        h1 { font-size: 2.8em; text-align: center; }
        h2 { font-size: 2.2em; margin-bottom: 20px; }
        h3 { font-size: 1.4em; }
        p, li { font-size: 1.25em; line-height: 1.7; color: #34495e; }
        ul { list-style-type: disc; padding-left: 30px; }
        .quote { font-style: italic; background-color: #e9f5f5; padding: 20px; border-left: 5px solid var(--color-secondary); margin: 25px 0; font-size: 1.2em; }
        pre { background-color: #2d2d2d; color: #e0e0e0; padding: 15px; border-radius: 8px; font-family: 'Fira Code', 'Courier New', monospace; font-size: 1em; margin-top: 10px; }
        .center-content { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; height: 100%; }
        .example-container { display: flex; gap: 25px; margin-top: 20px; }
        .example-container > div { flex: 1; }

        /* GUIA DO APRESENTADOR */
        .presenter-guide {
            margin-top: 30px;
            padding: 20px;
            border-top: 4px dashed var(--color-secondary);
            background-color: #f8f9fa;
            border-radius: 0 0 8px 8px;
        }
        .presenter-guide h4 {
            font-size: 1.3em;
            color: var(--color-primary);
            margin-top: 0;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .presenter-guide p, .presenter-guide li {
            font-size: 1.1em;
            line-height: 1.6;
            color: #495057;
        }
        .presenter-guide ul {
            padding-left: 20px;
        }
        .presenter-guide p > strong {
            display: inline-block;
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        /* Navega√ß√£o */
        #navigation { display: flex; justify-content: space-between; align-items: center; padding: 20px 40px; border-top: 1px solid #dfe6e9; background-color: #f8f9fa; }
        #navigation button { background-color: #0077b6; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: background-color 0.3s ease; }
        #navigation button:hover { background-color: #023e8a; }
        #navigation button:disabled { background-color: #bdc3c7; cursor: not-allowed; }
        #slide-counter { font-size: 1.1em; color: #555; }

    </style>
</head>
<body>

<div id="presentation-container">
    <div id="slide-viewport">
        
        <div class="slide active">
            <div class="audience-view center-content">
                <h1>Cap√≠tulo 9: Refactoring</h1>
                <p>Baseado no livro "Engenharia de Software Moderna"</p>
                <p class="quote">"N√£o sou um √≥timo programador; sou apenas um bom programador com √≥timos h√°bitos." ‚Äì Kent Beck</p>
            </div>

            <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Capturar a aten√ß√£o da audi√™ncia e introduzir o tema central: refatorar √© um h√°bito essencial para bons desenvolvedores, n√£o um talento raro.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Comece com uma pergunta: "Quem aqui j√° pegou um c√≥digo antigo e pensou: 'o que estava acontecendo aqui?'".</li>
                        <li>Apresente a cita√ß√£o de Kent Beck e explique que a palestra √© sobre esses "√≥timos h√°bitos".</li>
                        <li>Defina o tom: a apresenta√ß√£o ser√° pr√°tica, mostrando como melhorar a qualidade do nosso trabalho di√°rio.</li>
                    </ul>
                </p>
                <p><strong>üîó Conex√£o:</strong> "Para entender por que esses h√°bitos s√£o t√£o importantes, precisamos primeiro entender um fen√¥meno que afeta todo software: o envelhecimento."</p>
            </div>
        </div>

        <div class="slide">
            <div class="audience-view">
                <h2>O Que √© Refactoring?</h2>
                <p>√â o processo de reestruturar o c√≥digo para melhorar sua qualidade interna, <strong>sem alterar seu comportamento externo</strong>.</p>
                <h2>Leis da Evolu√ß√£o de Software</h2>
                <ul>
                    <li><strong>1¬™ Lei (Mudan√ßa Cont√≠nua):</strong> Um sistema precisa ser continuamente adaptado ou se tornar√° in√∫til.</li>
                    <li><strong>2¬™ Lei (Complexidade Crescente):</strong> Conforme um sistema evolui, sua complexidade aumenta, a menos que um trabalho seja feito para reduzi-la. Esse "trabalho" √© o <strong>refactoring</strong>.</li>
                </ul>
            </div>
            <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Justificar a necessidade de refatorar. N√£o √© um capricho, √© uma lei da natureza do software.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Use uma analogia para a 2¬™ Lei: "√â como uma casa. Se voc√™ s√≥ adiciona m√≥veis e nunca arruma, uma hora n√£o d√° mais para andar. Refatorar √© a 'arruma√ß√£o' constante que mant√©m a casa funcional."</li>
                        <li>Enfatize a parte "sem alterar seu comportamento externo". Isso √© crucial e o que diferencia refactoring de reescrita.</li>
                    </ul>
                </p>
                <p><strong>ü§î Perguntas Poss√≠veis:</strong> "Isso n√£o atrasa a entrega de novas funcionalidades?" Resposta: "A curto prazo, pode parecer. A longo prazo, acelera, pois o c√≥digo fica mais f√°cil de modificar."</p>
                <p><strong>üîó Conex√£o:</strong> "Ok, entendemos a teoria. Mas como fazemos isso na pr√°tica? Vamos come√ßar com a t√©cnica mais fundamental do nosso 'arsenal' de refatora√ß√£o."</p>
            </div>
        </div>

        <div class="slide">
             <div class="audience-view">
                <h2>Cat√°logo de Refactorings: Extrair Fun√ß√£o</h2>
                <p>Conhecido como o "canivete su√≠√ßo" dos refactorings, consiste em extrair um trecho de c√≥digo e mov√™-lo para uma nova fun√ß√£o (ou m√©todo).</p>
                <p><strong>Motiva√ß√µes Principais:</strong></p>
                <ul>
                    <li>Dividir fun√ß√µes grandes em partes menores e com responsabilidade √∫nica.</li>
                    <li>Eliminar duplica√ß√£o de c√≥digo.</li>
                    <li>Permitir o re√∫so da l√≥gica extra√≠da.</li>
                </ul>
            </div>
            <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Apresentar a t√©cnica mais importante e comum de refatora√ß√£o.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Chame de "canivete su√≠√ßo" para criar uma imagem mental forte.</li>
                        <li>O objetivo √© transformar c√≥digo complexo em uma hist√≥ria bem contada, onde o nome de cada fun√ß√£o √© um cap√≠tulo.</li>
                    </ul>
                </p>
                <p><strong>üîó Conex√£o:</strong> "Falar √© f√°cil, vamos ver como isso transforma um c√≥digo na pr√°tica."</p>
            </div>
        </div>

        <div class="slide">
            <div class="audience-view">
                <h2>Exemplo: Extrair Fun√ß√£o</h2>
                <div class="example-container">
                    <div>
                        <h3>Antes</h3>
                        <pre><code>def gerar_relatorio_final(pedidos):
    clientes = carregar_clientes()
    relatorio = "Relat√≥rio Final\n"

    total_geral = 0
    for pedido in pedidos:
        if pedido.cliente_id in clientes:
            total_geral += pedido.valor
    
    relatorio += f"Total de vendas: R$ {total_geral:.2f}\n"
    relatorio += f"Total de pedidos: {len(pedidos)}\n"
    
    return relatorio</code></pre>
                    </div>
                    <div>
                        <h3>Depois</h3>
                        <pre><code>def gerar_relatorio_final(pedidos):
    clientes = _carregar_clientes()
    total_geral = _calcular_total(pedidos, clientes)
    return _formatar_relatorio(total_geral, pedidos)

def _calcular_total(pedidos, clientes):
    ...

def _formatar_relatorio(total, pedidos):
    ...
</code></pre>
                    </div>
                </div>
            </div>
            <div class="presenter-guide">
                 <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Mostrar visualmente o ganho de clareza. O c√≥digo "Depois" deve parecer uma receita, f√°cil de seguir.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Mostre o c√≥digo "Antes" e diga: "Para entender o que isso faz, precisamos ler cada linha com aten√ß√£o."</li>
                        <li>Mostre o c√≥digo "Depois" e diga: "Agora, podemos entender a l√≥gica de neg√≥cio apenas lendo os nomes das fun√ß√µes. O 'como' est√° escondido, e o 'o qu√™' est√° evidente."</li>
                    </ul>
                </p>
                 <p><strong>üîó Conex√£o:</strong> "Extrair fun√ß√£o √© a base, mas existem outras ferramentas importantes na nossa caixa de ferramentas."</p>
            </div>
        </div>

        <div class="slide">
            <div class="audience-view">
                <h2>Outros Refactorings Essenciais</h2>
                <ul>
                    <li><strong>Extrair Classe:</strong> Cria uma nova classe a partir de um conjunto de dados e comportamentos de uma classe existente.</li>
                </ul>
                <h3>Exemplo: Extrair Classe</h3>
                <pre><code>class Pessoa:
    def __init__(self, nome, ddd, telefone):
        self.nome = nome
        self.ddd = ddd
        self.telefone = telefone

class Telefone:
    def __init__(self, ddd, numero):
        self.ddd = ddd
        self.numero = numero

class Pessoa:
    def __init__(self, nome, telefone: Telefone):
        self.nome = nome
        self.telefone = telefone
</code></pre>
            </div>
            <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Mostrar que refatorar n√£o √© s√≥ sobre fun√ß√µes, mas tamb√©m sobre a estrutura das classes e a organiza√ß√£o do sistema.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Para "Extrair Classe", explique que isso melhora a coes√£o. "Juntamos o que pertence um ao outro. Um telefone √© um 'conceito', merece sua pr√≥pria casa (classe)."</li>
                    </ul>
                </p>
                <p><strong>üîó Conex√£o:</strong> "Tudo isso parece √≥timo, mas como podemos fazer essas mudan√ßas sem quebrar o sistema? E quando exatamente devemos fazer isso?"</p>
            </div>
        </div>

        <div class="slide">
            <div class="audience-view">
                 <h2>Como e Quando Refatorar?</h2>
                 <ul>
                    <li><strong>A Import√¢ncia dos Testes:</strong> Uma su√≠te de testes automatizados √© sua rede de seguran√ßa. Sem testes, refatorar √© arriscado.</li>
                    <li><strong>Refactoring Oportunista (mais comum):</strong> Feito em pequenos passos durante outras tarefas.</li>
                    <li><strong>Refactoring Planejado (mais raro):</strong> Sess√µes dedicadas para mudan√ßas estruturais maiores.</li>
                </ul>
            </div>
             <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Ensinar o "workflow" do refactoring: testes como base, e a mentalidade de melhoria cont√≠nua (oportunista).</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>"Refatorar sem testes √© como fazer uma cirurgia de olhos vendados. Voc√™ pode ter sorte, mas o risco √© enorme."</li>
                        <li>Use a "Regra do Escoteiro": "Deixe a √°rea do acampamento (o c√≥digo) mais limpa do que voc√™ a encontrou." Isso resume o refactoring oportunista.</li>
                    </ul>
                </p>
                <p><strong>üîó Conex√£o:</strong> "Felizmente, n√£o precisamos fazer todo esse trabalho manualmente. Nossas ferramentas de desenvolvimento s√£o nossas maiores aliadas."</p>
            </div>
        </div>
        
        <div class="slide">
            <div class="audience-view">
                <h2>Code Smells (Maus Cheiros no C√≥digo)</h2>
                <p>S√£o "sintomas" no c√≥digo que indicam um problema de design. N√£o s√£o bugs, mas sinalizam que o c√≥digo pode ser melhorado.</p>
                <p class="quote">Um code smell √© um indicador de que algo pode estar errado. Ele serve como um guia para saber onde focar seus esfor√ßos de refatora√ß√£o.</p>
            </div>
            <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Introduzir o conceito de Code Smell como o "gatilho" para a refatora√ß√£o.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Use a analogia do cheiro: "Voc√™ n√£o v√™ o fogo, mas sente o cheiro de fuma√ßa. Um 'code smell' √© o cheiro de fuma√ßa no seu c√≥digo. Ele te diz: 'investigue aqui'."</li>
                        <li>Deixe claro que nem todo cheiro exige a√ß√£o imediata, mas todos exigem aten√ß√£o.</li>
                    </ul>
                </p>
                <p><strong>üîó Conex√£o:</strong> "Vamos agora conhecer os 'cheiros' mais comuns que encontramos no dia a dia."</p>
            </div>
        </div>
        
        <div class="slide">
            <div class="audience-view">
                 <h2>Principais Code Smells (Parte 1)</h2>
                 <ul>
                    <li><strong>C√≥digo Duplicado:</strong> O principal e mais grave.</li>
                    <li><strong>Fun√ß√µes Longas:</strong> Dif√≠ceis de entender, reutilizar e testar.</li>
                    <li><strong>Feature Envy (Inveja de Funcionalidade):</strong> Um m√©todo que parece mais interessado nos dados de outra classe.</li>
                </ul>
                <h3>Exemplo: Feature Envy</h3>
                <pre><code>class Pedido:
    def __init__(self, itens, cliente):
        self.itens = itens
        self.cliente = cliente
        
class Cliente:
    def __init__(self, nome, vip):
        self.nome = nome
        self.vip = vip

    def calcular_desconto(self, pedido: Pedido):
        total = sum(item.preco for item in pedido.itens)
        if total > 1000:
            return total * 0.10
        return 0
</code></pre>
            </div>
            <div class="presenter-guide">
                 <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Apresentar os smells mais cr√≠ticos que causam mais problemas.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Para C√≥digo Duplicado: "Se voc√™ tem que mudar a mesma l√≥gica em dois lugares, voc√™ tem um bug esperando para acontecer."</li>
                        <li>Para Feature Envy: "√â o m√©todo fofoqueiro. Ele vive em uma casa (classe), mas passa o dia todo na janela cuidando da vida da vizinha (outra classe). A solu√ß√£o √© mand√°-lo para a casa certa!"</li>
                    </ul>
                 </p>
                 <p><strong>ü§î Perguntas Poss√≠veis:</strong> "Qual o limite para uma fun√ß√£o ser considerada longa?" Resposta: "N√£o h√° um n√∫mero m√°gico. A regra √©: se voc√™ precisa de coment√°rios para separar se√ß√µes dentro da fun√ß√£o, ela provavelmente √© longa demais."</p>
                <p><strong>üîó Conex√£o:</strong> "Al√©m desses problemas estruturais, existem 'cheiros' mais sutis na forma como lidamos com dados e documenta√ß√£o."</p>
            </div>
        </div>
        
        <div class="slide">
            <div class="audience-view">
                <h2>Principais Code Smells (Parte 2)</h2>
                <ul>
                    <li><strong>Obsess√£o por Tipos Primitivos:</strong> Usar tipos simples (string, dict) para representar conceitos complexos (Endere√ßo, Moeda).</li>
                    <li><strong>Coment√°rios Explicativos:</strong> Coment√°rios usados para explicar um c√≥digo confuso. O bom c√≥digo √© autoexplicativo.</li>
                </ul>
                <h3>Exemplo: Obsess√£o por Tipos Primitivos</h3>
                <pre><code>def enviar_correspondencia(endereco: dict):
    print(f"Enviando para {endereco['rua']}, {endereco['numero']}")

class Endereco:
    def __init__(self, rua, numero, cidade):
        self.rua = rua
        self.numero = numero
        self.cidade = cidade
    
    def texto_completo(self):
        return f"{self.rua}, {self.numero} - {self.cidade}"

def enviar_correspondencia(endereco: Endereco):
    print(f"Enviando para {endereco.texto_completo()}")
</code></pre>
            </div>
             <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Mudar a mentalidade sobre dados e coment√°rios.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Sobre Tipos Primitivos: "Usar um dicion√°rio para um cliente √© como usar uma folha de papel em branco para uma ficha m√©dica. Uma classe `Cliente` √© a ficha com campos definidos, valida√ß√µes e comportamentos."</li>
                        <li>Sobre Coment√°rios: "Diferencie coment√°rios de 'o qu√™' (ruins) de coment√°rios de 'porqu√™' (bons). O c√≥digo deve dizer 'o qu√™' ele faz. O coment√°rio, se necess√°rio, diz 'porqu√™' ele faz daquela maneira."</li>
                    </ul>
                </p>
                <p><strong>ü§î Perguntas Poss√≠veis:</strong> "Mas meu chefe manda eu comentar tudo!" Resposta: "A melhor resposta √© escrever um c√≥digo t√£o claro que o coment√°rio se torna redundante. Mostre o valor disso."</p>
                <p><strong>üîó Conex√£o:</strong> "Vimos o porqu√™, o como e o quando refatorar. Vamos agora amarrar tudo isso e concluir nossa conversa."</p>
            </div>
        </div>

        <div class="slide">
            <div class="audience-view center-content">
                <h2>Conclus√£o</h2>
                <p>Refactoring n√£o √© uma tarefa separada, mas uma parte cont√≠nua e essencial do desenvolvimento de software.</p>
                <p>√â o h√°bito de "limpar o c√≥digo" para combater a complexidade, garantindo que o software permane√ßa saud√°vel, flex√≠vel e f√°cil de manter.</p>
            </div>
            <div class="presenter-guide">
                <h4>Guia do Apresentador</h4>
                <p><strong>üéØ Objetivo Principal:</strong> Deixar a audi√™ncia com uma mensagem inspiradora e um chamado √† a√ß√£o claro.</p>
                <p><strong>üó£Ô∏è Pontos para Falar:</strong>
                    <ul>
                        <li>Recapitule a jornada: "Vimos que o software envelhece (Lehman), mas temos as ferramentas (refactoring) para mant√™-lo jovem. Aprendemos a identificar os sinais (code smells) e a agir com seguran√ßa (testes)."</li>
                        <li>Volte √† cita√ß√£o inicial de Kent Beck. "Ser um bom programador n√£o √© sobre genialidade, √© sobre disciplina e bons h√°bitos. Refatorar √© talvez o principal deles."</li>
                        <li>Termine com um desafio: "Na pr√≥xima vez que mexerem em um c√≥digo, tentem aplicar a Regra do Escoteiro. Deixem o c√≥digo um pouquinho melhor do que o encontraram. Obrigado."</li>
                    </ul>
                </p>
            </div>
        </div>

    </div>
    
    <div id="navigation">
        <button id="prev-btn">Anterior</button>
        <span id="slide-counter"></span>
        <button id="next-btn">Pr√≥ximo</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // ... O JavaScript de navega√ß√£o permanece o mesmo ...
        const slides = document.querySelectorAll('.slide');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const slideCounter = document.getElementById('slide-counter');
        
        let currentSlide = 0;
        const totalSlides = slides.length;

        function showSlide(index) {
            slides.forEach((slide) => {
                slide.classList.remove('active');
            });
            
            slides[index].classList.add('active');
            slideCounter.textContent = `${index + 1} / ${totalSlides}`;
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === totalSlides - 1;
        }

        function changeSlide(direction) {
            currentSlide = Math.max(0, Math.min(totalSlides - 1, currentSlide + direction));
            showSlide(currentSlide);
        }
        
        prevBtn.addEventListener('click', () => changeSlide(-1));
        nextBtn.addEventListener('click', () => changeSlide(1));
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                if(currentSlide > 0) changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                if(currentSlide < totalSlides - 1) changeSlide(1);
            }
        });

        showSlide(currentSlide);
    });
</script>

</body>
</html>